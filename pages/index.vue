<template>
  <div
    class="html front not-logged-in no-sidebars page-frontpage jquery-once-1-processed ga-not-mobile eu-cookie-compliance-processed"
  >
    <div class="region region-page-top">
      <div class="l-page l--col-2">
        <Header />

        <div
          class="site-above-content"
          :style="{ backgroundImage: `url(${backgroundUrl})` }"
        >
          <div class="l-above-content">
            <div class="site-above-content__banner">
              <img
                class="front-banner-image"
                src="~/assets/images/gtimedia-gradsingapore-bg_0.jpg"
              />
            </div>
            <div class="region region-above-content">
              <div id="block-bean-homepage-banner" class="block block-bean">
                <div class="content">
                  <div
                    about="/block/homepage-banner"
                    typeof
                    class="dg-default entity entity-bean bean-homepage-masterbanner view-mode-default"
                  >
                    <div class="content-main">
                      <div
                        class="field field-name-field-banner-title field-type-text field-label-hidden"
                      >
                        <h1>
                          The best graduate jobs, internships &amp; graduate
                          programmes in Singapore
                        </h1>
                      </div>
                      <div
                        class="field field-name-field-homepage-intro field-type-text-long field-label-hidden"
                      >
                        <div class="field-items">
                          <div class="field-item even">
                            Leading graduate employers and careers advice in one
                            location
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div
                id="block-gradaus-jobs-gradaus-jobs-homepage-filter"
                class="block block-gradaus-jobs"
              >
                <div class="content">
                  <form
                    action="https://gradsingapore.com/"
                    method="post"
                    id="gradaus-jobs-search-form"
                    accept-charset="UTF-8"
                  >
                    <div>
                      <div
                        class="form-item form-type-select form-item-gradaus-job-type"
                      >
                        <label for="edit-gradaus-job-type"
                          >I'm looking for</label
                        >
                        <select
                          id="edit-gradaus-job-type"
                          name="gradaus_job_type"
                          class="form-select"
                        >
                          <option value="0"
                            >Graduate Jobs and Internships</option
                          >
                          <option value="6986">Internships</option>
                          <option value="4140">Graduate Jobs</option>
                        </select>
                      </div>
                      <div
                        class="form-item form-type-select form-item-gradaus-sectors"
                      >
                        <label for="edit-gradaus-sectors"
                          >and my field of study is</label
                        >
                        <select
                          id="edit-gradaus-sectors"
                          name="gradaus_sectors"
                          class="form-select"
                        >
                          <option value="0">All Fields of Study</option>
                          <option value="13751">
                            Engineering, Maths, IT &amp; Computer Sciences
                          </option>
                          <option value="13766">
                            Finance, Accounting, Economics &amp; Business
                            Administration
                          </option>
                          <option value="13771"
                            >Health &amp; Medical Sciences</option
                          >
                          <option value="13776"
                            >Humanities, Arts &amp; Social Sciences</option
                          >
                          <option value="13761">Law &amp; Legal Studies</option>
                          <option value="13781"
                            >Property &amp; Built Environment</option
                          >
                          <option value="13756">Sciences</option>
                          <option value="13786"
                            >Teaching, Education &amp; Human Welfare</option
                          >
                        </select>
                      </div>
                      <div
                        class="form-item form-type-select form-item-gradaus-courses"
                        style="display: none;"
                      >
                        <label for="edit-gradaus-courses"
                          >and my field of study is</label
                        >
                        <select
                          id="edit-gradaus-courses"
                          name="gradaus_courses"
                          class="form-select"
                        ></select>
                      </div>
                      <input
                        type="submit"
                        id="edit-gradaus-job-search-submit"
                        name="op"
                        value="Search"
                        class="form-submit"
                      />
                      <input
                        type="hidden"
                        name="form_build_id"
                        value="form-2VdoaX-tkUrMxDPL9oj6uqAKOuuiIAikxJCMkQakMn8"
                      />
                      <input
                        type="hidden"
                        name="form_id"
                        value="gradaus_jobs_search_form"
                      />
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="l-main">
          <div class="l-content" role="main">
            <a id="main-content"></a>
            <div class="region region-content">
              <div id="block-system-main" class="block block-system">
                <div class="content">
                  <div class="panel-display panel-1col clearfix">
                    <div class="panel-panel panel-col">
                      <div>
                        <div
                          class="panel-pane pane-block pane-bean-homepage-ad"
                        >
                          <div class="pane-content">
                            <div
                              class="entity entity-bean bean-homepage-advertisement clearfix"
                              about="/block/homepage-ad"
                              typeof
                            >
                              <div class="content">
                                <div
                                  class="paragraphs-items paragraphs-items-field-advertisement paragraphs-items-field-advertisement-full paragraphs-items-full"
                                >
                                  <div
                                    class="field field-name-field-advertisement field-type-paragraphs field-label-hidden"
                                  >
                                    <div class="field-items">
                                      <div class="field-item even">
                                        <div
                                          class="entity entity-paragraphs-item paragraphs-item-advertisement"
                                          about
                                          typeof
                                        >
                                          <div class="content">
                                            <div
                                              class="field field-name-field-advertisement-reference field-type-entityreference field-label-hidden"
                                            >
                                              <div class="field-items">
                                                <div class="field-item even">
                                                  <div
                                                    about="/singapores-100-leading-graduate-employers-20192020"
                                                    typeof="sioc:Item foaf:Document"
                                                    class="ds-1col node node-core-advice-ad view-mode-full clearfix"
                                                  >
                                                    <div
                                                      class="field field-name-field-ad-image field-type-image field-label-hidden"
                                                    >
                                                      <div class="field-items">
                                                        <div
                                                          class="field-item even"
                                                        >
                                                          <a
                                                            href="https://gradsingapore.com/ad/click/39341/638d69efa4c2f3e5ffc5f7ada94e0e9b2d7aa20468b5800cfcf00583e85d4bbc"
                                                            target="_blank"
                                                          >
                                                            <img
                                                              typeof="foaf:Image"
                                                              src="~/assets/images/leader-board.jpg"
                                                              width="4043"
                                                              height="1043"
                                                              alt
                                                            />
                                                          </a>
                                                        </div>
                                                      </div>
                                                    </div>
                                                  </div>
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>

                        <div class="panel-separator"></div>
                        <div
                          class="panel-pane pane-views-panes pane-graduate-jobs-schemes-latest-jobs-and-internships pane-jobs-and-internships"
                        >
                          <h2 class="pane-title">
                            Latest Jobs and Internships
                          </h2>

                          <div class="pane-content">
                            <div
                              class="view view-graduate-jobs-schemes view-id-graduate_jobs_schemes view-display-id-latest_jobs_and_internships view-dom-id-0b9b25effd7c4864e9f2654d0bb8891f"
                            >
                              <div class="view-content clearfix">
                                <div
                                  class="views-row views-row-1 clearfix"
                                  v-for="job in jobs"
                                  :key="job.id"
                                >
                                  <div
                                    about="/graduate-employers/gti-media/jobs-internships/marketing-intern-0"
                                    typeof="sioc:Item foaf:Document"
                                    class="dg-three-col node node-ad-vacancy view-mode-search_result"
                                  >
                                    <div class="content-header">
                                      <div class="field-opportunity-type">
                                        <span class="internships"
                                          >Internships</span
                                        >
                                      </div>
                                      <div
                                        class="field field-name-title field-type-ds field-label-hidden"
                                      >
                                        <div class="field-items">
                                          <div
                                            class="field-item even"
                                            property="dc:title"
                                          >
                                            <h3>
                                              <a
                                                href="/graduate-employers/detail"
                                                >Marketing Intern</a
                                              >
                                            </h3>
                                          </div>
                                        </div>
                                      </div>
                                      <div
                                        class="field field-name-field-ad-vac-locations"
                                      >
                                        Singapore
                                      </div>
                                    </div>
                                    <div class="content-threecol-wrap">
                                      <div class="content-main">
                                        <div
                                          class="field field-name-ds-organisation-logo field-type-ds field-label-hidden"
                                        >
                                          <div class="field-items">
                                            <div class="field-item even">
                                              <a
                                                href="/graduate-employers/detail"
                                              >
                                                <div
                                                  class="field field-name-field-ad-org-logo field-type-image field-label-hidden"
                                                >
                                                  <div class="field-items">
                                                    <div
                                                      class="field-item even"
                                                    >
                                                      <img
                                                        typeof="foaf:Image"
                                                        src="~/assets/images/gtimedia-gradmalaysia-gtimedia-logo.jpg"
                                                        width="157"
                                                        height="70"
                                                        alt
                                                      />
                                                    </div>
                                                  </div>
                                                </div>
                                              </a>
                                            </div>
                                          </div>
                                        </div>
                                        <div
                                          class="field field-name-field-organisation-name field-type-node-reference field-label-hidden"
                                        >
                                          <div class="field-items">
                                            <div class="field-item even">
                                              <a
                                                href="/graduate-employers/detail"
                                                >GTI Media</a
                                              >
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                      <div class="content-secondary">
                                        <div
                                          class="field field-name-body field-type-text-with-summary field-label-hidden"
                                        >
                                          <div class="field-items">
                                            <div
                                              class="field-item even"
                                              property="content:encoded"
                                            >
                                              <p>
                                                As part of the Marketing team,
                                                you will mainly assist in
                                                preparing and managing marketing
                                                activities, creating effective
                                                marketing campaigns and working
                                                closely within the marketing
                                                department to achieve
                                                KPIs.&nbsp;
                                              </p>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                      <div class="content-tertiary">
                                        <div
                                          class="field field-name-taxonomy-vocabulary-9"
                                        >
                                          <div class="label-above">
                                            Relevant Field of Study
                                            <span class="info">
                                              <span class="tooltip">
                                                Accepting applications from
                                                students with degrees in
                                                Finance, Accounting, Economics
                                                &amp; Business Administration
                                              </span>
                                            </span>
                                          </div>
                                          <span
                                            data-bg="#00a550"
                                            class="degree areasOfStudy-processed"
                                            style="background: rgb(0, 165, 80);"
                                            >F</span
                                          >
                                        </div>
                                        <div
                                          class="field field-name-field-minimum-level-study"
                                        >
                                          <div class="label-above">
                                            Qualification Level
                                          </div>
                                          University Undergraduate
                                        </div>
                                        <div class="field field-name-open-date">
                                          <div class="label-inline">
                                            Applications open
                                          </div>
                                          <span class="deadline"
                                            >29 Jul 2020</span
                                          >
                                        </div>
                                        <div
                                          class="field field-name-closing-date"
                                        >
                                          <div class="label-inline">
                                            Closing
                                          </div>
                                          <span class="deadline"
                                            >31 Oct 2020</span
                                          >
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>

                              <div class="view-footer">
                                <p>
                                  <a
                                    href="/search-jobs"
                                    class="button button--primary"
                                    >View more Jobs &amp; Internships</a
                                  >
                                </p>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import "~/assets/employer.scss";
import axios from "axios";
import { mapActions, mapState, mapMutations } from "vuex";

export default {
  name: "HomePage",
  head: {
    bodyAttrs: {
      class:
        "html front not-logged-in no-sidebars page-frontpage jquery-once-1-processed ga-not-mobile eu-cookie-compliance-processed"
    }
  },
  computed: {
    backgroundUrl() {
      return require("~/assets/images/gtimedia-gradsingapore-bg_0.jpg");
    },
    ...mapState("jobs", {
      jobsFromState: state => state.jobs
    })
  },
  async asyncData() {
    const res = await axios.get(`https://api.thetraineeclub.com/job.json`);
    if (res && res.status === 200 && res.data.jobs) {
      return { jobs: res.data.jobs };
    }
    return [];
  },
  mounted() {
    if (!this.jobs.length) {
      this.fetchJobs();
    } else {
      this.setJobsToState(this.jobs);
    }
  },
  data() {
    return {
      jobs: []
    };
  },
  methods: {
    ...mapActions("jobs", ["fetchJobs"]),
    ...mapMutations("jobs", {
      setJobsToState: "setJobs"
    })
  }
};
</script>
